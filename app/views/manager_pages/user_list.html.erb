<div class="content">
  <h1> Danh sách nhân viên </h1>
  <%= link_to "Add User", new_registration_path, class: "btn btn-default btn-large", target: "_blank" %>
  <br />
  <br />
  <table id="users-table" class="display table table-bordered">
    <thead>
      <th>Id</th>
      <th>Action</th>
      <th>First Name</th>
      <th>Last Name</th>
      <th>Email</th>
      <th>Gender</th>
      <th>Role</th>
      <th>Current Role</th>
      <th>Phone Number</th>
      <th>Address</th>
      <th>City</th>
      <th>State</th>
      <th>Zip</th>
      <th>Country</th>
    </thead>
  <tbody>
    <% if @users %>
      <% @users.each do |user| %>
        <%= render partial: 'user_row', locals: { user: user } %>
      <% end %>
    <% end%>
  </tbody>
  <tfoot>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
    <th><input type="text" name="search_role" placeholder="Search roles" class="search_init"></th>
    <th><input type="text" name="search_current_role" placeholder="Search current roles" class="search_init"></th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
    <th></th>
  </tfoot>
  </table>

</div>

<script>
  $(document).ready(function(){
    var userTable = $('#users-table').dataTable();
    var asInitUserVals = new Array();

    $("#users-table tfoot input").keyup( function () {
      /* Filter on the column (the index) of this element */
      userTable.fnFilter( this.value, $("#users-table tfoot th").index($(this).parent()) );
    } );

    /*
     * Support functions to provide a little bit of 'user friendlyness' to the textboxes in
     * the footer
     */
    $("#users-table tfoot input").each( function (i) {
      asInitUserVals[i] = this.value;
    } );

    $("#users-table tfoot input").focus( function () {
      if ( this.className == "search_init" )
      {
        this.className = "";
        this.value = "";
      }
    } );

    $("#users-table tfoot input").blur( function (i) {
      if ( this.value == "" )
      {
        this.className = "search_init";
        this.value = asInitUserVals[$("#users-table tfoot th").index($(this).parent())];
      }
    } );
  });
</script>

<style>
  tfoot th input {
    width: 100%;
  }
</style>
